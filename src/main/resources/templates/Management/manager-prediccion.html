<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predecir Ventas</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link rel="stylesheet" href="/css/importJakartaFont.css">
    <link rel="icon" href="/img/Logo.png" type="image/png">
</head>

<body class="container-fluid jakarta-regular">
<main class="row flex-nowrap">
    <div class="col-3 border-end p-0">
        <div class="d-flex flex-column flex-shrink-0 p-3 bg-body-tertiary min-vh-100">

            <a href="/manager/dashboard"
               class="d-flex align-items-center mb-3 link-body-emphasis text-decoration-none">
                <img src="/img/Logo.png" width="40" height="32" class="me-2">
                <span class="fs-4 jakarta-bold">Playapp</span>
            </a>

            <hr>

            <ul class="nav nav-pills flex-column mb-auto">

                <li><a href="/manager/dashboard" class="nav-link link-body-emphasis">
                    <img src="/img/icons/speedometer2.svg" width="16" height="16" class="me-2">
                    Dashboard
                </a></li>

                <li><a href="/manager/orders" class="nav-link link-body-emphasis">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-stickies me-2" viewBox="0 0 16 16">
                            <path d="M1.5 0A1.5 1.5 0 0 0 0 1.5V13a1 1 0 0 0 1 1V1.5a.5.5 0 0 1 .5-.5H14a1 1 0 0 0-1-1z"/>
                            <path d="M3.5 2A1.5 1.5 0 0 0 2 3.5v11A1.5 1.5 0 0 0 3.5 16h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 16 9.586V3.5A1.5 1.5 0 0 0 14.5 2zM3 3.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .5.5V9h-4.5A1.5 1.5 0 0 0 9 10.5V15H3.5a.5.5 0 0 1-.5-.5zm7 11.293V10.5a.5.5 0 0 1 .5-.5h4.293z"/>
                        </svg>
                    Ordenes
                </a></li>

                <li><a href="/manager/products" class="nav-link link-body-emphasis">
                    <img src="/img/icons/boxes.svg" width="16" height="16" class="me-2">
                    Catalogo
                </a></li>

                <li><a href="/manager/prediccion" class="nav-link active">
                    <img src="/img/icons/graph-up.svg" width="16" height="16" class="me-2">
                    Predecir Ventas
                </a></li>

            </ul>

            <hr>

            <div class="dropdown">
                <a href="#" class="d-flex align-items-center link-body-emphasis dropdown-toggle"
                   data-bs-toggle="dropdown">
                    <img src="https://github.com/mdo.png" width="32" height="32" class="rounded-circle me-2">
                    <strong th:text="${nombreRestaurante}"></strong>
                </a>
                <ul class="dropdown-menu shadow">
                    <li>
                        <form th:action="@{/logout}" method="post">
                            <button type="submit" class="dropdown-item">Salir</button>
                        </form>
                    </li>
                </ul>
            </div>

        </div>
    </div>

    <div class="col-9 p-4">

        <h2 class="jakarta-bold mb-3">Predicción de Ventas</h2>
        <p class="text-muted mb-4">Ingresa los datos para que el sistema prediga el total de ventas esperadas.</p>

        <form id="formPrediccion" class="row g-3">

            <div class="col-md-6">
                <label class="form-label">Día de la Semana</label>
                <select class="form-select" id="diaSemana">
                    <option>Lunes</option>
                    <option>Martes</option>
                    <option>Miercoles</option>
                    <option>Jueves</option>
                    <option>Viernes</option>
                    <option>Sabado</option>
                    <option>Domingo</option>
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">Producto</label>
                <select class="form-select" id="producto" required>
                    <option value="Cerveza Club Colombia">Cerveza Club Colombia</option>
                    <option value="Ceviche de camaron">Ceviche de camaron</option>
                    <option value="Clase de surf">Clase de surf</option>
                    <option value="Alquiler de moto acuática">Alquiler de moto acuática</option>
                    <option value="Coco frio">Coco frio</option>
                    <option value="Coctel de maracuya">Coctel de maracuya</option>
                    <option value="Pescado frito">Pescado frito</option>
                    <option value="Ostras frescas">Ostras frescas</option>
                    <option value="Limonada de coco">Limonada de coco</option>
                    <option value="Tinto frio">Tinto frio</option>
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">Categoría</label>
                <select class="form-select" id="categoria">
                    <option>Bebida</option>
                    <option>Comida</option>
                    <option>Servicio</option>
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">Precio</label>
                <input type="" class="form-control" id="precio">
            </div>

            <div class="col-md-6">
                <label class="form-label">Clima</label>
                <select class="form-select" id="clima">
                    <option>Soleado</option>
                    <option>Nublado</option>
                    <option>Lluvioso</option>
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">Temporada</label>
                <select class="form-select" id="temporada">
                    <option>Alta</option>
                    <option>Baja</option>
                    <option>Normal</option>
                </select>
            </div>

            <div class="col-12 mt-4">
                <button type="button" class="btn btn-primary" onclick="predecir()">Calcular Predicción</button>
            </div>
        </form>

        <div id="resultado" class="alert alert-info mt-4 d-none"></div>

    </div>
</main>

<script>
    async function predecir() {
        const datos = {
            diaSemana: document.getElementById('diaSemana').value,
            producto: document.getElementById('producto').value,
            categoria: document.getElementById('categoria').value,
            precio: document.getElementById('precio').value,
            clima: document.getElementById('clima').value,
            temporada: document.getElementById('temporada').value
        };

        const response = await fetch('/manager/prediccion/predecir', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(datos)
        });

        const json = await response.json();

        const resultDiv = document.getElementById('resultado');
        resultDiv.classList.remove('d-none');
        resultDiv.innerHTML = `<strong>Resultado:</strong> ${json.prediccion.toFixed(2)}`;
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
